.PHONY: clean all

APP_GUI=libgui
LIB_GUI=gui
OBJ_GUI=$(LIB_GUI).o
SRC_GUI=$(LIB_GUI).c
GUI=$(APP_GUI).a
INCLUDE_GUI=../include/gui.h

APP_UTILITIES=libutilities
LIB_UTILITIES=utilities
OBJ_UTILITIES=$(LIB_UTILITIES).o
SRC_UTILITIES=$(LIB_UTILITIES).c
UTILITIES=$(APP_UTILITIES).a
INCLUDE_UTILITIES=../include/utilities.h

APP_CFG=libcfg
LIB_CFG=cfg
OBJ_CFG=$(LIB_CFG).o
SRC_CFG=$(LIB_CFG).c
CFG=$(APP_CFG).a
INCLUDE_CFG=../include/cfg.h

CC=gcc
MAKELIB=ar rv
RANLIB=ranlib

all: $(GUI) $(UTILITIES) $(CFG) clean

$(GUI): $(OBJ_GUI)
		$(MAKELIB) $(GUI) $(OBJ_GUI) && $(RANLIB) $(GUI)

$(OBJ_GUI): $(SRC_GUI) $(INCLUDE_GUI)
		$(CC) -c $(SRC_GUI)

$(UTILITIES): $(OBJ_UTILITIES)
		$(MAKELIB) $(UTILITIES) $(OBJ_UTILITIES) && $(RANLIB) $(UTILITIES)

$(OBJ_UTILITIES): $(SRC_UTILITIES) $(INCLUDE_UTILITIES)
		$(CC) -c $(SRC_UTILITIES)

$(CFG): $(OBJ_CFG)
		$(MAKELIB) $(CFG) $(OBJ_CFG) && $(RANLIB) $(CFG)

$(OBJ_CFG): $(SRC_CFG) $(INCLUDE_CFG)
		$(CC) -c $(SRC_CFG) -I../include

clean:
		rm  *.o